<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Front End Example</title>

      <link href="styles/bootstrap/bootstrap.min.css" media="all" rel="stylesheet" />
      <link href="styles/main.css" media="all" rel="stylesheet" />

      <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>
    <body>

        <header class='navbar navbar-default navbar-static-top'>
          <nav class='container' role='navigation'>
            <div class='navbar-header'>
              <a href='index.html' class='navbar-brand'>Front End Demo</a>

              <button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='.navbar-collapse'>
                <span class='sr-only'>Toggle navigation</span>
                <span class='icon-bar'></span>
                <span class='icon-bar'></span>
                <span class='icon-bar'></span>
              </button>
            </div>

            <ul class='nav navbar-nav navbar-right collapse navbar-collapse'>
              <li><a href='#'>Tickets</a></li>
              <li><a href='#'>Stations</a></li>
              <li class='dropdown'>
                <a href='/about' data-target='#' class='dropdown-toggle' data-toggle='dropdown'>About <span class='caret'></span></a>
                <ul class='dropdown-menu' role='menu'>
                  <li><a href='#'>Our Story</a></li>
                  <li><a href='#'>Contact Us</a></li>
                  <li class='divider'></li>
                  <li><a href='#'>Blog</a></li>
                  <li class='divider'></li>
                  <li><a href='#'>Twitter</a></li>
                  <li><a href='#'>Facebook</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </header>

        <section>
          <div class='container'>
            <div class='row well well-lg'>
              <div class='col-md-6'>
                <h2>Front End Showcase</h2>
                <p class='lead'>This file shows off the different front end extensions through the KeystoneJS API</p>
                <button type='button' class='btn btn-lg btn-default'>Take the Tour</button>
                <button type='button' class='btn btn-lg btn-primary'>Book Tickets Now</button>
              </div>
              <div class='col-md-6 visible-md visible-lg'>
                <img src='images/img-header.jpg' alt='Blast off with Bootstrap' />
              </div>
            </div>

            <div class='row text-center features'>
              <div class='col-sm-4 col-xs-10 col-xs-offset-1 col-sm-offset-0'>
                <i class='glyphicon glyphicon-briefcase '></i>
                <h3>Book Today!</h3>
                <p>Even if you're traveling tomorrow, you can still get tickets today. We have a number of conveniently located ports around the globe to service everyone.</p>
              </div>

              <div class='col-sm-4 col-xs-6'>
                <i class='glyphicon glyphicon-random'></i>
                <h3>Go Anywhere</h3>
                <p>If you need to get to space today, why not try out a transporter? Despite the claims, there are have been no deaths in the last 6 weeks!</p>
              </div>

              <div class='col-sm-4 col-xs-6'>
                <i class='glyphicon glyphicon-send'></i>
                <h3>RocketBus&reg;</h3>
                <p>For cheapest fares, catch the next RocketBus&reg; to the stars. Cheaper on your wallet, and easiest way to make friends.</p>
              </div>
            </div>
          </div>
        </section>

        <section>
            <h2><u>Front End Widgets</u></h2>
            <p>This section displays the first three images stored in the FrontEndWidets model.</p>
            <div class='container'>
                <div class='row well well-lg'>
                    <div class='col-md-4'>
                        <img id="img1" src="" alt="" class="img-responsive center-block" />
                    </div>
                    <div class='col-md-4'>
                        <img id="img2" src="" alt="" class="img-responsive center-block" />
                    </div>
                    <div class='col-md-4'>
                        <img id="img3" src="" alt="" class="img-responsive center-block" />
                    </div>
                </div>
            </div>
        </section>
        
        <br><br>
        
        <section>
            <h2><u>Uploaded Images</u></h2>
            <p>This section displays the first three images stored in the ImageUpload model.</p>
            <div class='container'>
                <div class='row well well-lg'>
                    <div class='col-md-4'>
                        <img id="img4" src="" alt="" class="img-responsive center-block" />
                    </div>
                    <div class='col-md-4'>
                        <img id="img5" src="" alt="" class="img-responsive center-block" />
                    </div>
                    <div class='col-md-4'>
                        <img id="img6" src="" alt="" class="img-responsive center-block" />
                    </div>
                </div>
            </div>
        </section>

        

        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
        <script src="js/jquery/jquery-2.1.4.min.js"></script>
        <script src="js/bootstrap/bootstrap-3.3.5.min.js"></script>

        <script type="text/javascript">
            //Global Variables
            var serverIp = '107.170.200.116';
            
            $(document).ready( function() {

                //Call server to retrieve JSON FrontEndWidget data.
                $.getJSON('http://'+serverIp+':3000/api/frontendwidget/list', '', processWidgetJSON);

                
                //Call server to retrieve JSON ImgUpload data.
                $.getJSON('http://'+serverIp+':3000/api/imageupload/list', '', processImageJSON);
            });
            

            //Callback function executed when FrontEndWidget JSON data is returned.
            function processWidgetJSON(data) {
                try {

                    var imgDataRaw = data.collections;

                    //Fill in the images with data retrieved from the API.
                    $('#img1').attr('src', imgDataRaw[0].url1);
                    $('#img1').attr('alt', imgDataRaw[0].alt1);

                    $('#img2').attr('src', imgDataRaw[1].url1);
                    $('#img2').attr('alt', imgDataRaw[1].alt1);

                    $('#img3').attr('src', imgDataRaw[2].url1);
                    $('#img3').attr('alt', imgDataRaw[2].alt1);

                } catch(err) {
                    console.error('There was a catastrophic error trying to load Widget data. Error message:');
                    console.error(err.message);
                }

            }
            
            //Callback function executed when ImageUpload JSON data is returned.
            function processImageJSON(data) {
                try {
                    debugger;
                    var imgDataRaw = data.collections;

                    //Fill in the images with data retrieved from the API.
                    $('#img4').attr('src', 'http://'+serverIp+':3000'+imgDataRaw[0].image.path.slice(6)+'/'+imgDataRaw[0].image.filename);
                    $('#img4').attr('alt', imgDataRaw[0].alt1);

                    $('#img5').attr('src', 'http://'+serverIp+':3000'+imgDataRaw[1].image.path.slice(6)+'/'+imgDataRaw[1].image.filename);
                    $('#img5').attr('alt', imgDataRaw[1].alt1);

                    $('#img6').attr('src', 'http://'+serverIp+':3000'+imgDataRaw[2].image.path.slice(6)+'/'+imgDataRaw[2].image.filename);
                    $('#img6').attr('alt', imgDataRaw[2].alt1);

                } catch(err) {
                    console.error('There was a catastrophic error trying to load Widget data. Error message:');
                    console.error(err.message);
                }

            }
            
            
        </script>
        
        
    </body>
</html>
